import{b as pe,k as U,l as me,m as _e,o as ve,_ as M,f as re,c as te,a as W,p as fe,g as he,u as ye,q as ge,t as be}from"./BOzVj4_F.js";import{c as D,b as ke,t as $e,af as we,ag as ue,w as E,o as ne,u as C,a as De,g as Ce,f as B,ah as L,r as Ve,d as V,R as _,B as g,V as p,J as n,I as O,L as J,Q,E as z,a5 as X,a6 as Ie,ai as xe,D as A,N,M as T,H as P,q as Se,C as Me,Y,U as Oe}from"./BShxNmUg.js";import R from"./CUs8Q34q.js";import{I as ae,u as Z,a as Pe}from"./CbkGJgCa.js";import{I as ie,D as ee}from"./zXpsPJkB.js";import{_ as K}from"./Bm1qAGry.js";import{s as Te}from"./DZg0U9VJ.js";import{u as ze}from"./Cs2E4OOq.js";import{a as Be}from"./BGcOqxEI.js";const je=r=>r==="defer"||r===!1;function Le(...r){var v;const l=typeof r[r.length-1]=="string"?r.pop():void 0;typeof r[0]!="string"&&r.unshift(l);let[a,o,t={}]=r;if(typeof a!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof o!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const e=pe(),s=o,c=()=>U.value,h=()=>e.isHydrating?e.payload.data[a]:e.static.data[a];t.server=t.server??!0,t.default=t.default??c,t.getCachedData=t.getCachedData??h,t.lazy=t.lazy??!1,t.immediate=t.immediate??!0,t.deep=t.deep??U.deep,t.dedupe=t.dedupe??"cancel";const b=t.getCachedData(a,e),I=b!=null;if(!e._asyncData[a]||!t.immediate){(v=e.payload._errors)[a]??(v[a]=U.errorValue);const u=t.deep?D:ke;e._asyncData[a]={data:u(I?b:t.default()),pending:D(!I),error:$e(e.payload._errors,a),status:D("idle"),_default:t.default}}const m={...e._asyncData[a]};delete m._default,m.refresh=m.execute=(u={})=>{if(e._asyncDataPromises[a]){if(je(u.dedupe??t.dedupe))return e._asyncDataPromises[a];e._asyncDataPromises[a].cancelled=!0}if(u._initial||e.isHydrating&&u._initial!==!1){const w=u._initial?b:t.getCachedData(a,e);if(w!=null)return Promise.resolve(w)}m.pending.value=!0,m.status.value="pending";const k=new Promise((w,f)=>{try{w(s(e))}catch(j){f(j)}}).then(async w=>{if(k.cancelled)return e._asyncDataPromises[a];let f=w;t.transform&&(f=await t.transform(w)),t.pick&&(f=Ue(f,t.pick)),e.payload.data[a]=f,m.data.value=f,m.error.value=U.errorValue,m.status.value="success"}).catch(w=>{if(k.cancelled)return e._asyncDataPromises[a];m.error.value=me(w),m.data.value=C(t.default()),m.status.value="error"}).finally(()=>{k.cancelled||(m.pending.value=!1,delete e._asyncDataPromises[a])});return e._asyncDataPromises[a]=k,e._asyncDataPromises[a]},m.clear=()=>Fe(e,a);const $=()=>m.refresh({_initial:!0}),y=t.server!==!1&&e.payload.serverRendered;{const u=De();if(u&&!u._nuxtOnBeforeMountCbs){u._nuxtOnBeforeMountCbs=[];const f=u._nuxtOnBeforeMountCbs;we(()=>{f.forEach(j=>{j()}),f.splice(0,f.length)}),ue(()=>f.splice(0,f.length))}y&&e.isHydrating&&(m.error.value||b!=null)?(m.pending.value=!1,m.status.value=m.error.value?"error":"success"):u&&(e.payload.serverRendered&&e.isHydrating||t.lazy)&&t.immediate?u._nuxtOnBeforeMountCbs.push($):t.immediate&&$();const k=Ce();if(t.watch){const f=E(t.watch,()=>m.refresh());k&&ne(f)}const w=e.hook("app:data:refresh",async f=>{(!f||f.includes(a))&&await m.refresh()});k&&ne(w)}const i=Promise.resolve(e._asyncDataPromises[a]).then(()=>m);return Object.assign(i,m),i}function Fe(r,l){l in r.payload.data&&(r.payload.data[l]=void 0),l in r.payload._errors&&(r.payload._errors[l]=U.errorValue),r._asyncData[l]&&(r._asyncData[l].data.value=void 0,r._asyncData[l].error.value=U.errorValue,r._asyncData[l].pending.value=!1,r._asyncData[l].status.value="idle"),l in r._asyncDataPromises&&(r._asyncDataPromises[l]&&(r._asyncDataPromises[l].cancelled=!0),r._asyncDataPromises[l]=void 0)}function Ue(r,l){const a={};for(const o of l)a[o]=r[o];return a}function Ee(r,l,a){const[o={},t]=typeof l=="string"?[{},l]:[l,a],e=B(()=>L(r)),s=o.key||_e([t,typeof e.value=="string"?e.value:"",...Ne(o)]);if(!s||typeof s!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+s);if(!r)throw new Error("[nuxt] [useFetch] request is missing.");const c=s===t?"$f"+s:s;if(!o.baseURL&&typeof e.value=="string"&&e.value[0]==="/"&&e.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:h,lazy:b,default:I,transform:m,pick:$,watch:y,immediate:i,getCachedData:v,deep:u,dedupe:k,...w}=o,f=Ve({...ve,...w,cache:typeof o.cache=="boolean"?void 0:o.cache}),j={server:h,lazy:b,default:I,transform:m,pick:$,immediate:i,getCachedData:v,deep:u,dedupe:k,watch:y===!1?[]:[f,e,...y||[]]};let d;return Le(c,()=>{var H;(H=d==null?void 0:d.abort)==null||H.call(d,"Request aborted as another request to the same endpoint was initiated."),d=typeof AbortController<"u"?new AbortController:{};const F=L(o.timeout);let S;return F&&(S=setTimeout(()=>d.abort("Request aborted due to timeout."),F),d.signal.onabort=()=>clearTimeout(S)),(o.$fetch||globalThis.$fetch)(e.value,{signal:d.signal,...f}).finally(()=>{clearTimeout(S)})},j)}function Ne(r){var a;const l=[((a=L(r.method))==null?void 0:a.toUpperCase())||"GET",L(r.baseURL)];for(const o of[r.params||r.query]){const t=L(o);if(!t)continue;const e={};for(const[s,c]of Object.entries(t))e[L(s)]=L(c);l.push(e)}return l}const Re={class:"icon-btn"},qe=V({__name:"IconBtn",props:{icon:{default:"custom:user"},size:{default:"24"}},setup(r){return(l,a)=>{const o=R;return _(),g("div",Re,[p(o,{name:l.icon,size:l.size},null,8,["name","size"])])}}}),G=M(qe,[["__scopeId","data-v-c4979a21"]]),He={class:"usernew"},Ae={class:"usernew__form"},Ke={class:"usernew__input"},We={class:"usernew__input"},Ye=V({__name:"AuthNew",props:{phone:String,name:String},emits:["onNext"],setup(r,{emit:l}){const a=r,o=l,t=D(a.phone),e=D(a.name),s=()=>{o("onNext",{phone:t.value,name:e.value})};return(c,h)=>(_(),g("div",He,[n("div",Ae,[n("div",Ke,[h[2]||(h[2]=n("p",null,"Имя",-1)),p(ae,{modelValue:e.value,"onUpdate:modelValue":h[0]||(h[0]=b=>e.value=b),placeholder:"Поддубная Елена"},null,8,["modelValue"])]),n("div",We,[h[3]||(h[3]=n("p",null,"Номер телефона",-1)),p(ie,{modelValue:t.value,"onUpdate:modelValue":h[1]||(h[1]=b=>t.value=b),placeholder:"+7 (999) 999-99-99"},null,8,["modelValue"])]),p(ee,{name:"Продолжить",type:"primary",color:"brown",size:"normal",onClick:s})])]))}}),Ge=M(Ye,[["__scopeId","data-v-71f00814"]]),Je={style:{display:"flex","align-items":"center"}},Qe=["type","inputmode","placeholder","disabled"],Xe={key:0},Ze=["innerHTML"],et=V({__name:"single-otp-input",props:{inputType:{default:"tel"},inputmode:{default:"numeric"},value:{},separator:{default:""},focus:{type:Boolean,default:!1},inputClasses:{default:""},conditionalClass:{default:""},shouldAutoFocus:{type:Boolean,default:!1},isLastChild:{type:Boolean,default:!1},placeholder:{default:""},isDisabled:{type:Boolean,default:!1}},emits:["on-change","on-keydown","on-paste","on-focus","on-blur"],setup(r,{emit:l}){const a=r,o=l,t=D(a.value||""),e=D(null),s=()=>(t.value=t.value,t.value.length>1&&(t.value=t.value.slice(0,1)),o("on-change",t.value.toString())),c=i=>i>=65&&i<=90,h=i=>i>=48&&i<=57||i>=96&&i<=105,b=i=>{a.isDisabled&&i.preventDefault();const v=i||window.event,u=v.which?v.which:v.keyCode;h(u)||a.inputType==="letter-numeric"&&c(u)||[8,9,13,37,39,46,86].includes(u)?o("on-keydown",i):v.preventDefault()},I=i=>o("on-paste",i),m=()=>(e.value.select(),o("on-focus")),$=()=>o("on-blur"),y=B(()=>["letter-numeric","number"].includes(a.inputType)?"text":a.inputType);return E(()=>a.value,(i,v)=>{i!==v&&(t.value=i)}),E(()=>a.focus,(i,v)=>{v!==i&&e.value&&a.focus&&(e.value.focus(),e.value.select())}),X(()=>{e.value&&a.focus&&a.shouldAutoFocus&&(e.value.focus(),e.value.select())}),(i,v)=>(_(),g("div",Je,[Ie(n("input",{"data-test":"single-input",type:y.value,inputmode:i.inputmode,placeholder:i.placeholder,disabled:i.isDisabled,ref_key:"input",ref:e,min:"0",max:"9",maxlength:1,pattern:"[0-9]","onUpdate:modelValue":v[0]||(v[0]=u=>t.value=u),class:A([i.inputClasses,i.conditionalClass,{"is-complete":t.value}]),onInput:s,onKeydown:b,onPaste:I,onFocus:m,onBlur:$},null,42,Qe),[[xe,t.value]]),!i.isLastChild&&i.separator?(_(),g("span",Xe,[n("span",{innerHTML:i.separator},null,8,Ze)])):O("",!0)]))}}),tt={style:{display:"flex"},class:"otp-input-container"},at={key:0,autocomplete:"off",name:"hidden",type:"text",style:{display:"none"}},st=8,ot=37,nt=39,lt=46,rt=V({__name:"vue3-otp-input",props:{value:{default:""},numInputs:{default:4},separator:{default:""},inputClasses:{default:""},conditionalClass:{},inputType:{},inputmode:{default:"text"},shouldAutoFocus:{type:Boolean,default:!1},placeholder:{},isDisabled:{type:Boolean},shouldFocusOrder:{type:Boolean}},emits:["update:value","on-change","on-complete"],setup(r,{expose:l,emit:a}){const o=r,t=a,e=D(0),s=D([]),c=D([]);E(()=>o.value,d=>{if(d.length===o.numInputs||s.value.length===0){const x=d.split("");s.value=x}},{immediate:!0});const h=d=>{e.value=d},b=()=>{e.value=-1},I=()=>s.value.join("").length===o.numInputs?(t("update:value",s.value.join("")),t("on-complete",s.value.join(""))):"Wait until the user enters the required number of characters",m=d=>{e.value=Math.max(Math.min(o.numInputs-1,d),0)},$=()=>{m(e.value+1)},y=()=>{m(e.value-1)},i=d=>{c.value=Object.assign([],s.value),s.value[e.value]=d.toString(),c.value.join("")!==s.value.join("")&&(t("update:value",s.value.join("")),t("on-change",s.value.join("")),I())},v=d=>{d.preventDefault();const x=d.clipboardData.getData("text/plain").slice(0,o.numInputs-e.value).split("");if(o.inputType==="number"&&!x.join("").match(/^\d+$/)||o.inputType==="letter-numeric"&&!x.join("").match(/^\w+$/))return"Invalid pasted data";const F=s.value.slice(0,e.value).concat(x);return F.slice(0,o.numInputs).forEach(function(S,q){s.value[q]=S}),m(F.slice(0,o.numInputs).length),I()},u=d=>{i(d),$()},k=()=>{s.value.length>0&&(t("update:value",""),t("on-change","")),s.value=[],e.value=0},w=d=>{const x=d.split("");x.length===o.numInputs&&(s.value=x,t("update:value",s.value.join("")),t("on-complete",s.value.join("")))},f=(d,x)=>{switch(d.keyCode){case st:d.preventDefault(),i(""),y();break;case lt:d.preventDefault(),i("");break;case ot:d.preventDefault(),y();break;case nt:d.preventDefault(),$();break;default:j(x);break}},j=d=>{o.shouldFocusOrder&&setTimeout(()=>{const x=s.value.join("").length;d-x>=0&&(e.value=x,s.value[d]="")},100)};return l({clearInput:k,fillInput:w}),(d,x)=>(_(),g("div",tt,[d.inputType==="password"?(_(),g("input",at)):O("",!0),(_(!0),g(J,null,Q(d.numInputs,(F,S)=>{var q,H;return _(),z(et,{key:S,focus:e.value===S,value:s.value[S],separator:d.separator,"input-type":d.inputType,inputmode:d.inputmode,"input-classes":d.inputClasses,conditionalClass:(q=d.conditionalClass)==null?void 0:q[S],"is-last-child":S===d.numInputs-1,"should-auto-focus":d.shouldAutoFocus,placeholder:(H=d.placeholder)==null?void 0:H[S],"is-disabled":d.isDisabled,onOnChange:u,onOnKeydown:oe=>f(oe,S),onOnPaste:v,onOnFocus:oe=>h(S),onOnBlur:b},null,8,["focus","value","separator","input-type","inputmode","input-classes","conditionalClass","is-last-child","should-auto-focus","placeholder","is-disabled","onOnKeydown","onOnFocus"])}),128))]))}}),ut={class:"ver_main"},it={class:"ver__form"},ct={class:"ver_code__inputs"},dt={key:0,class:"error"},pt={class:"ver__timer"},mt={class:"form__notice"},_t=V({__name:"AuthVerification",props:{modelValue:{},error:{}},emits:["update:modelValue","verify","resendOtp"],setup(r,{emit:l}){const a=r,o=l,t=D(180),e=D(""),s=B({get:()=>a.modelValue,set:$=>o("update:modelValue",$)});E(()=>a.modelValue,$=>{s.value=$});const c=B(()=>{const $=Math.floor(t.value/60).toString().padStart(2,"0"),y=(t.value%60).toString().padStart(2,"0");return`${$}:${y}`});X(()=>{b()});let h=null;const b=()=>{h=Te(()=>{t.value>0?t.value--:clearInterval(h)},1e3)},I=()=>{t.value===0&&(console.log("Повторная отправка кода..."),e.value="",s.value="",o("resendOtp"),t.value=180,b())},m=$=>{o("verify",$)};return($,y)=>{const i=K;return _(),g("div",ut,[y[6]||(y[6]=n("div",{class:"ver_head"},[n("p",null,"Мы отправим SMS-сообщение с кодом подтверждения")],-1)),n("div",it,[y[1]||(y[1]=n("p",null,"Введите код",-1)),n("div",ct,[p(C(rt),{value:s.value,"onUpdate:value":y[0]||(y[0]=v=>s.value=v),"num-inputs":6,"input-classes":"otp-input",onOnComplete:m,placeholder:["*","*","*","*","*","*"]},null,8,["value"])]),$.error?(_(),g("p",dt,N($.error),1)):O("",!0)]),n("div",pt,[n("span",{onClick:I,class:A({disabled:t.value>0})}," Отправить код повторно "+N(c.value),3)]),n("div",mt,[y[4]||(y[4]=T(" Нажимая кнопку “Подтвердить номер”, Вы принимаете условия ")),p(i,null,{default:P(()=>y[2]||(y[2]=[T("Программы лояльности")])),_:1}),y[5]||(y[5]=T(" и обработку персональных данных на условиях ")),p(i,null,{default:P(()=>y[3]||(y[3]=[T("Политики конфиденциальности")])),_:1})])])}}}),vt=M(_t,[["__scopeId","data-v-e55cc2be"]]),ft={class:"form"},ht={class:"form__main"},yt={class:"form_input"},gt={class:"form_btn"},bt={class:"form__notice"},kt=V({__name:"EmailForm",props:{modelValue:{}},setup(r,{emit:l}){const a=r,o=l,t=B({get:()=>a.modelValue,set:s=>o("update:modelValue",s)});function e(){o("submitEmail",t)}return(s,c)=>{const h=K;return _(),g("div",ft,[c[6]||(c[6]=n("p",null,"Мы отправим SMS-сообщение с кодом подтверждения",-1)),n("div",ht,[n("div",yt,[c[1]||(c[1]=n("span",null,"E-Mail ",-1)),p(ae,{modelValue:C(t),"onUpdate:modelValue":c[0]||(c[0]=b=>Se(t)?t.value=b:null),placeholder:"Введите e-mail"},null,8,["modelValue"])]),n("div",gt,[p(ee,{name:"Подтвердить e-mail",type:"primary",color:"brown",size:"normal",onClick:e})]),n("div",bt,[c[4]||(c[4]=T(" Нажимая кнопку “Подтвердить номер”, Вы принимаете условия ")),p(h,null,{default:P(()=>c[2]||(c[2]=[T("Программы лояльности")])),_:1}),c[5]||(c[5]=T(" и обработку персональных данных на условиях ")),p(h,null,{default:P(()=>c[3]||(c[3]=[T("Политики конфиденциальности")])),_:1})])])])}}}),$t=M(kt,[["__scopeId","data-v-b76477df"]]),wt={class:"auth"},Dt={class:"auth__head"},Ct={class:"auth_main"},Vt={key:0,class:"loader"},It={key:1,class:"auth_main__child"},xt=V({__name:"ModalAuth",setup(r){const l=D(!1),a=D(!1),o=D(""),t=D(""),e=D(""),s=D(!1),c=D(null),{loginUser:h}=re(),{closeModal:b}=Z(),I=te(),m=async()=>{var v,u;try{s.value=!0;const k=await W.post("http://fura.dynamic-devs-collective.ru/wp-json/custom-auth/v1/send-otp",{email:e.value});l.value=!0,o.value="",c.value=k.data.user_data}catch(k){console.error(((u=(v=k.response)==null?void 0:v.data)==null?void 0:u.message)||k.message)}finally{s.value=!1}},$=async()=>{var v,u;try{s.value=!0;const k=await W.post("http://fura.dynamic-devs-collective.ru/wp-json/custom-auth/v1/resend-otp",{email:e.value});console.log(k.data),l.value=!0,o.value=""}catch(k){console.error(((u=(v=k.response)==null?void 0:v.data)==null?void 0:u.message)||k.message)}finally{s.value=!1}},y=async()=>{var v,u,k,w;try{s.value=!0;const f=await W.post("http://fura.dynamic-devs-collective.ru/wp-json/custom-auth/v1/verify-otp",{email:e.value,otp_code:t.value});f.data&&(await h(f.data),o.value="",c.value&&c.value.first_name?I.push("/"):a.value=!0)}catch(f){console.error(((u=(v=f.response)==null?void 0:v.data)==null?void 0:u.message)||f.message),o.value=((w=(k=f.response)==null?void 0:k.data)==null?void 0:w.message)||"Неверный код OTP"}finally{s.value=!1}},i=async v=>{try{s.value=!0;const u=await W.post("http://fura.dynamic-devs-collective.ru/wp-json/custom-auth/v1/update-profile",{email:e.value,name:v.name,phone:v.phone});console.log("Профиль обновлен",u.data)}catch(u){console.error("Ошибка при обновлении профиля:",u)}finally{s.value=!1}};return(v,u)=>{const k=R;return _(),g("div",wt,[n("div",Dt,[u[4]||(u[4]=n("h3",null,"Войти или зарегистрироваться",-1)),n("div",{class:"close-btn",onClick:u[1]||(u[1]=w=>C(b)("auth"))},[p(G,{icon:"simple-line-icons:close",size:"34",onClick:u[0]||(u[0]=w=>C(b)("auth"))})])]),n("div",Ct,[s.value?(_(),g("div",Vt,[p(k,{name:"eos-icons:bubble-loading"})])):(_(),g("div",It,[!l.value&&!a.value?(_(),z($t,{key:0,onSubmitEmail:m,modelValue:e.value,"onUpdate:modelValue":u[2]||(u[2]=w=>e.value=w)},null,8,["modelValue"])):O("",!0),l.value&&!a.value?(_(),z(vt,{key:1,modelValue:t.value,"onUpdate:modelValue":u[3]||(u[3]=w=>t.value=w),onResendOtp:$,onVerify:y,error:o.value},null,8,["modelValue","error"])):O("",!0),a.value?(_(),z(Ge,{key:2,onOnNext:i})):O("",!0)]))])])}}}),St=M(xt,[["__scopeId","data-v-c4d32c5b"]]),le=V({__name:"Divider",props:{height:{}},setup(r){return(l,a)=>(_(),g("div",{class:"divider",style:Me({height:l.height+"rem"})},null,4))}});function Mt(){return{sendMessage:async l=>{const a="8048487916:AAFismqdRc2IV_l3tW8lWoPtHz7Sg-OPOhc",o="-4538996700",t=`https://api.telegram.org/bot${a}/sendMessage`;try{const{data:e,error:s}=await Ee(t,{method:"POST",body:{chat_id:o,text:l,parse_mode:"Markdown"},headers:{"Content-Type":"application/json"}},"$D94x6itNdV");return s.value?(console.error("Ошибка при отправке сообщения в Telegram:",s.value),{success:!1,error:s.value}):{success:!0,data:e.value}}catch(e){return console.error("Ошибка:",e),{success:!1,error:e}}}}}const Ot={class:"callback"},Pt={class:"callback__head"},Tt={class:"callback__form"},zt=V({__name:"ModalCallback",setup(r){const{sendMessage:l}=Mt(),a=D({name:"",phone:""}),{closeModal:o}=Z();te();const t=async()=>{if(a.value.name&&a.value.phone){const e=`Новая заявка:
Имя: ${a.value.name}
Телефон: ${a.value.phone}`;(await l(e)).success?(alert("Заявка успешно отправлена!"),o("callback")):alert("Ошибка при отправке заявки.")}else alert("Пожалуйста, заполните все поля.")};return(e,s)=>(_(),g("div",Ot,[n("div",Pt,[s[4]||(s[4]=n("h3",null,"Оставить заявку",-1)),n("div",{class:"close-btn",onClick:s[1]||(s[1]=c=>C(o)("callback"))},[p(G,{icon:"simple-line-icons:close",size:"34",onClick:s[0]||(s[0]=c=>C(o)("callback"))})])]),n("div",Tt,[p(ae,{placeholder:"Ваше имя",modelValue:a.value.name,"onUpdate:modelValue":s[2]||(s[2]=c=>a.value.name=c)},null,8,["modelValue"]),p(le,{height:1}),p(ie,{placeholder:"Ваш телефон",modelValue:a.value.phone,"onUpdate:modelValue":s[3]||(s[3]=c=>a.value.phone=c)},null,8,["modelValue"]),p(le,{height:2}),p(ee,{name:"Отправить",type:"secondary",color:"black",size:"normal",onClick:t})])]))}}),Bt=M(zt,[["__scopeId","data-v-7ef41d21"]]),jt={class:"socials"},Lt=["href"],Ft=V({__name:"Socials",setup(r){const l=D([{icon:"vk",link:"/",size:"35"},{icon:"tg",link:"/",size:"35"},{icon:"wa",link:"/",size:"35"}]);return(a,o)=>{const t=R;return _(),g("div",jt,[n("ul",null,[(_(!0),g(J,null,Q(C(l),(e,s)=>(_(),g("li",{key:"socials-item-"+s},[n("a",{target:"_blank",href:e.link},[p(t,{name:`custom:${e.icon}`,size:e.size},null,8,["name","size"])],8,Lt)]))),128))])])}}}),ce=M(Ft,[["__scopeId","data-v-75bb5279"]]),Ut=fe("/img/logo.svg"),Et=V({__name:"Logo",props:{position:{default:"header"}},setup(r){return(l,a)=>{const o=K;return _(),g("div",{class:A([`position-${l.position}`,"logo"])},[p(o,{to:"/"},{default:P(()=>a[0]||(a[0]=[n("img",{src:Ut,alt:""},null,-1)])),_:1})],2)}}}),se=M(Et,[["__scopeId","data-v-e73623d9"]]),Nt={class:"nav"},Rt=V({__name:"Nav",setup(r){const l=D([{name:"Каталог",link:"/shop"},{name:"Аренда",link:"/rent"},{name:"Для дизайнеров",link:"/design"}]);return(a,o)=>{const t=K;return _(),g("nav",Nt,[(_(!0),g(J,null,Q(C(l),(e,s)=>(_(),z(t,{key:"nav-item-"+s,to:e.link},{default:P(()=>[T(N(e.name),1)]),_:2},1032,["to"]))),128))])}}}),de=M(Rt,[["__scopeId","data-v-c00ec348"]]),qt={class:"container"},Ht={class:"header_top"},At={class:"burger"},Kt={class:"header_col__left"},Wt={class:"header_col__right"},Yt={class:"header__action"},Gt={key:0},Jt={class:"header_carts"},Qt={class:"counter"},Xt={class:"header_bottom"},Zt=V({__name:"Header",setup(r){const l=he(),a=te(),{openModal:o,closeModal:t}=Z(),{user:e}=ye(),{carts:s}=ze(),c=B(()=>l.name!="index"),h=B(()=>s.value),b=()=>{o("callback")},I=()=>{!e.value||!e.value.token?o("auth"):(t("auth"),a.push("profile"))},m=D(!1),$=()=>{window.scrollY>100?m.value=!0:m.value=!1};return X(()=>{window.addEventListener("scroll",$)}),ue(()=>{window.removeEventListener("scroll",$)}),(y,i)=>{const v=R;return _(),g("header",{class:A(["header",{gray:c.value,scrolled:m.value}])},[n("div",qt,[n("div",Ht,[n("div",At,[p(v,{name:"iconamoon:menu-burger-horizontal-thin",size:35})]),n("div",Kt,[i[2]||(i[2]=n("div",{class:"header_phone"},[n("a",{target:"_blank",href:"tel:+78002222659"},"+7 (800) 222 26 59 ")],-1)),p(ce)]),n("div",{class:A(["header_center",{"logo--scrolled":m.value}])},[p(se)],2),n("div",Wt,[p(ee,{name:"Связаться с нами",type:"secondary",color:"brown",size:"xsmall",onClick:b}),n("div",Yt,[n("div",{class:"header_user",onClick:i[0]||(i[0]=u=>I())},[p(G),C(e)&&C(e).user_data?(_(),g("p",Gt,N(C(e).user_data.first_name),1)):O("",!0)]),n("div",Jt,[n("div",Qt,N(h.value.length),1),p(G,{icon:"custom:cart",onClick:i[1]||(i[1]=u=>C(a).push("/cart"))})])])])]),n("div",Xt,[p(de)])])],2)}}}),ea=M(Zt,[["__scopeId","data-v-6956733f"]]),ta={class:"footer"},aa={class:"container"},sa={class:"footer_main"},oa={class:"footer_col__brand"},na={class:"footer__email"},la={target:"_blank",href:"mailto:Softpear@ya.ru"},ra={class:"footer_col__center"},ua={class:"footer_additionaly"},ia={class:"footer_col__info"},ca=V({__name:"Footer",setup(r){const l=D([{name:"Оферта для физических лиц",link:"/offer-physical"},{name:"Оферта для юридических лиц и ИП",link:"/offer-legal"},{name:"Политика конфиденциальности",link:"/privacy"}]);return(a,o)=>{const t=R,e=K;return _(),g("footer",ta,[n("div",aa,[n("div",sa,[n("div",oa,[p(se,{position:"footer"}),n("div",na,[n("a",la,[p(t,{name:"custom:email"}),o[0]||(o[0]=n("p",null,"Softpear@ya.ru",-1))])])]),n("div",ra,[p(de),n("div",ua,[(_(!0),g(J,null,Q(C(l),(s,c)=>(_(),z(e,{key:"additionaly-nav-item-"+c,to:s.link},{default:P(()=>[T(N(s.name),1)]),_:2},1032,["to"]))),128))]),o[1]||(o[1]=n("div",{class:"footer_legal__info"},[n("span",null,"ИП Ворфоломеева Ольга Александровна "),n("span",null,"ИНН 571000616047")],-1))]),n("div",ia,[p(ce),o[2]||(o[2]=n("div",{class:"footer_phone"},[n("a",{target:"_blank",href:"tel:+78002222659"},"+7 (800) 222 26 59")],-1)),o[3]||(o[3]=n("div",{class:"footer_phone"},[n("a",{target:"_blank",href:"tel:+79189609505"},"+7 (918) 960 95 05")],-1))])])])])}}}),da=M(ca,[["__scopeId","data-v-e1b45a7f"]]),pa={key:0,class:"preloader"},ma={class:"preloader-inner"},_a={class:"preloader__icon"},va=V({__name:"Preloader",setup(r){const{isLoading:l}=ge();return(a,o)=>{const t=R;return _(),z(Y,{name:"fade"},{default:P(()=>[C(l)?(_(),g("div",pa,[n("div",ma,[n("div",_a,[p(t,{name:"line-md:loading-twotone-loop",size:100})]),p(se)])])):O("",!0)]),_:1})}}}),fa=M(va,[["__scopeId","data-v-acd685fc"]]),ha={class:"main"},ya={class:"content"},xa=V({__name:"default",setup(r){const l=be(),{closeAllModals:a}=Z(),{modals:o}=Pe(),{getAllProducts:t}=Be(),{fetchUser:e}=re(),s=B(()=>Object.values(o.value).some(c=>c));return E(()=>l.fullPath,()=>{a()}),X(async()=>{await t(),await e()}),(c,h)=>(_(),g("main",ha,[p(ea),n("div",ya,[Oe(c.$slots,"default")]),p(Y,{name:"modal"},{default:P(()=>[C(o).auth?(_(),z(St,{key:0,class:"modal-animate"})):O("",!0)]),_:1}),p(Y,{name:"modal"},{default:P(()=>[C(o).callback?(_(),z(Bt,{key:0,class:"modal-animate"})):O("",!0)]),_:1}),p(Y,{name:"fade-bg"},{default:P(()=>[C(s)?(_(),g("div",{key:0,class:"page-bg",onClick:h[0]||(h[0]=(...b)=>C(a)&&C(a)(...b))})):O("",!0)]),_:1}),p(fa),p(da)]))}});export{xa as default};
