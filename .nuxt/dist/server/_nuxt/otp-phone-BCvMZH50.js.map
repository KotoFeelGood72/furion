{"version":3,"file":"otp-phone-BCvMZH50.js","sources":["../../../../pages/profile/edit/components/otp-phone.vue"],"sourcesContent":["<template>\r\n  <!-- <div class=\"code__form\">\r\n    <div class=\"code_form__title\">Введите код</div>\r\n    <div class=\"code__inputs\">\r\n      <Vue3OtpInput\r\n        v-model=\"codes\"\r\n        :num-inputs=\"4\"\r\n        input-classes=\"otp-input\"\r\n        @on-complete=\"handleOnComplete\"\r\n        :placeholder=\"['*', '*', '*', '*']\"\r\n      />\r\n    </div>\r\n    <p v-if=\"errorMessage\" class=\"error\">{{ errorMessage }}</p>\r\n  </div>\r\n  <div class=\"code__timer\">\r\n    <span @click=\"resendCode\" :class=\"{ disabled: timer > 0 }\">\r\n      Отправить код повторно {{ formattedTime }}\r\n    </span>\r\n  </div> -->\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed, onMounted } from \"vue\";\r\nimport { defineEmits } from \"vue\";\r\nimport Vue3OtpInput from \"vue3-otp-input\";\r\n\r\nconst codes = ref(\"\");\r\nconst timer = ref(180);\r\nconst errorMessage = ref(\"\");\r\n\r\nconst emit = defineEmits([\"onNext\"]);\r\n\r\nconst formattedTime = computed(() => {\r\n  const minutes = Math.floor(timer.value / 60)\r\n    .toString()\r\n    .padStart(2, \"0\");\r\n  const seconds = (timer.value % 60).toString().padStart(2, \"0\");\r\n  return `${minutes}:${seconds}`;\r\n});\r\n\r\nonMounted(() => {\r\n  startTimer();\r\n});\r\n\r\nconst startTimer = () => {\r\n  const countdown = setInterval(() => {\r\n    if (timer.value > 0) {\r\n      timer.value--;\r\n    } else {\r\n      clearInterval(countdown);\r\n    }\r\n  }, 1000);\r\n};\r\n\r\nconst resendCode = () => {\r\n  if (timer.value === 0) {\r\n    console.log(\"Повторная отправка кода...\");\r\n    errorMessage.value = \"\";\r\n    codes.value = \"\";\r\n    timer.value = 180;\r\n    startTimer();\r\n  }\r\n};\r\n\r\nconst handleOnComplete = (value: any) => {\r\n  if (value !== \"1113\") {\r\n    errorMessage.value = \"Неверный код\";\r\n  } else {\r\n    emit(\"onNext\");\r\n    errorMessage.value = \"\";\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.code__form {\r\n  text-align: center;\r\n}\r\n\r\n.code_form__title {\r\n  font-size: 1.8rem;\r\n  color: $gray;\r\n  font-family: $font_2;\r\n  margin-bottom: 2rem;\r\n}\r\n\r\n.otp-input-container {\r\n  @include flex-center;\r\n  gap: 2.6rem;\r\n  margin-bottom: 4rem;\r\n  :deep(.otp-input) {\r\n    width: 5rem;\r\n    height: 5rem;\r\n    @include app;\r\n    border: 0.1rem solid #878787;\r\n    text-align: center;\r\n    font-size: 3rem;\r\n    font-family: $font_2;\r\n  }\r\n}\r\n\r\n.code__timer {\r\n  text-align: center;\r\n  font-size: 1.6rem;\r\n  color: $brown;\r\n}\r\n\r\n.error {\r\n  color: #b23e00;\r\n  font-size: 1.6rem;\r\n  margin: -2rem 0 3rem 0;\r\n}\r\n</style>\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0Bc,QAAI,EAAE;AACd,UAAA,QAAQ,IAAI,GAAG;AACA,QAAI,EAAE;AAIL,aAAS,MAAM;AAC7B,YAAA,UAAU,KAAK,MAAM,MAAM,QAAQ,EAAE,EACxC,SAAS,EACT,SAAS,GAAG,GAAG;AACZ,YAAA,WAAW,MAAM,QAAQ,IAAI,WAAW,SAAS,GAAG,GAAG;AACtD,aAAA,GAAG,OAAO,IAAI,OAAO;AAAA,IAAA,CAC7B;;;;;;;;;;;;"}